
[2024-02-14T14:23:54.900Z] info: /dial: called: req.params {"tenantId":":tenant-id","interactionId":":interaction-id"}
[2024-02-14T14:23:54.904Z] info: action-id: "aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b"
[2024-02-14T14:23:54.904Z] info: /dial: called {
    "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
    "interaction-id": "65ccccf0-67ad-4a18-ac60-db0cdc68971c",
    "action-id": "aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b",
    "params": {
        "id": "aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b",
        "action-name": "dial",
        "sub-id": "2e6475e3-9725-43e4-bc7b-b12830ce175b",
        "interaction-id": "65ccccf0-67ad-4a18-ac60-db0cdc68971c",
        "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
        "integration": {
            "id": null
        },
        "metadata": {},
        "parameters": {
            "from": "+15064064885",
            "to": {
                "type": "webrtc",
                "value": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91",
                "provider": "twilio",
                "region": "default",
                "sdk-version": "default"
            },
            "muted": false,
            "record": false,
            "early-media": false,
            "timeout": "2024-02-14T14:24:54Z",
            "resource": {
                "session-reason": null,
                "deleted": false,
                "session-id": "218f05e0-cb44-11ee-8203-2362e2069fdf",
                "email": "bliao@serenova.com",
                "active-extension": {
                    "type": "webrtc",
                    "value": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91",
                    "provider": "twilio",
                    "region": "default",
                    "sdk-version": "default"
                },
                "updated": "2024-02-14T14:20:15Z",
                "created": "2019-12-18T15:03:15Z",
                "user-id": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                "state": "ready",
                "last-ready": 1707920415404,
                "extension": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91",
                "updated-by": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                "created-by": "81fb5470-1b26-11e9-8442-70c414dc3a43",
                "status": "accepted",
                "extensions": [
                    {
                        "provider": "twilio",
                        "region": "default",
                        "sdk-version": "default",
                        "type": "webrtc",
                        "value": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"
                    },
                    {
                        "description": "Linephone playben",
                        "type": "sip",
                        "value": "sip:playben@sip.linphone.org"
                    }
                ],
                "last-action": 1707920415404,
                "id": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                "capacity-rule-id": "0acf16f0-142a-11ee-8871-3643c25e25c5",
                "role-id": "84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91",
                "groups": {
                    "84c26990-21a7-11ea-8bf3-be4e7b8a0a91": true,
                    "2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f": true
                },
                "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
                "session-started": "2024-02-14T14:20:15Z",
                "direction": "inbound",
                "session": {
                    "headless": false,
                    "closed": false,
                    "session-id": "218f05e0-cb44-11ee-8203-2362e2069fdf",
                    "expire-at": "2024-02-14T14:26:55Z",
                    "reason-id": null,
                    "resource-id": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                    "capacity-rule-id": null,
                    "reason-list-id": null,
                    "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
                    "direction": "inbound"
                }
            },
            "timeout-end": "2024-02-14T14:24:53Z"
        }
    }
}
[2024-02-14T14:23:54.911Z] info: metadata is empty {"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","params":{"id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","action-name":"dial","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","integration":{"id":null},"metadata":{},"parameters":{"from":"+15064064885","to":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"muted":false,"record":false,"early-media":false,"timeout":"2024-02-14T14:24:54Z","resource":{"session-reason":null,"deleted":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","email":"bliao@serenova.com","active-extension":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"updated":"2024-02-14T14:20:15Z","created":"2019-12-18T15:03:15Z","user-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","state":"ready","last-ready":1707920415404,"extension":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","updated-by":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","created-by":"81fb5470-1b26-11e9-8442-70c414dc3a43","status":"accepted","extensions":[{"provider":"twilio","region":"default","sdk-version":"default","type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"},{"description":"Linephone playben","type":"sip","value":"sip:playben@sip.linphone.org"}],"last-action":1707920415404,"id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":"0acf16f0-142a-11ee-8871-3643c25e25c5","role-id":"84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91","groups":{"84c26990-21a7-11ea-8bf3-be4e7b8a0a91":true,"2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f":true},"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","session-started":"2024-02-14T14:20:15Z","direction":"inbound","session":{"headless":false,"closed":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","expire-at":"2024-02-14T14:26:55Z","reason-id":null,"resource-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":null,"reason-list-id":null,"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","direction":"inbound"}},"timeout-end":"2024-02-14T14:24:53Z"}}}
[2024-02-14T14:23:54.912Z] info: callBackUri "https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook"
[2024-02-14T14:23:54.922Z] debug: Create a webhook request, token: "QVBJVGVzdDpBcGlUZXN0MTIzIUAj"
[2024-02-14T14:23:54.923Z] debug: Create a webhook request, body: "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<web_service version=\"1.0\">\n  <eventhandler>\n    <eventsubscribe action=\"add\" resource_id=\"any\" resource_type=\"any\" type=\"any\"/>\n    <webhooks action=\"add\" url=\"https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook\"/>\n  </eventhandler>\n</web_service>"
[2024-02-14T14:23:54.923Z] debug: Create a webhook request, xmsurl: "http://107.20.26.214:81/default/eventhandlers?tag=remotecontrol_;appid=app"
[2024-02-14T14:23:55.018Z] debug: createWebHookRequest: result: "{\"web_service\":{\"$\":{\"version\":\"1.0\"},\"eventhandler_response\":[{\"$\":{\"identifier\":\"f73b5a1d-cca9-4389-a9a2-515c6608804a\",\"appid\":\"app\",\"status\":\"active\",\"href\":\"/default/eventhandlers/f73b5a1d-cca9-4389-a9a2-515c6608804a\"},\"eventsubscribe\":[{\"$\":{\"type\":\"any\",\"resource_id\":\"any\",\"resource_type\":\"any\"}}],\"webhooks\":[{\"$\":{\"url\":\"https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook\"}}]}]}}"
[2024-02-14T14:23:55.019Z] info: XMS event is created {"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","params":{"id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","action-name":"dial","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","integration":{"id":null},"metadata":{},"parameters":{"from":"+15064064885","to":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"muted":false,"record":false,"early-media":false,"timeout":"2024-02-14T14:24:54Z","resource":{"session-reason":null,"deleted":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","email":"bliao@serenova.com","active-extension":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"updated":"2024-02-14T14:20:15Z","created":"2019-12-18T15:03:15Z","user-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","state":"ready","last-ready":1707920415404,"extension":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","updated-by":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","created-by":"81fb5470-1b26-11e9-8442-70c414dc3a43","status":"accepted","extensions":[{"provider":"twilio","region":"default","sdk-version":"default","type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"},{"description":"Linephone playben","type":"sip","value":"sip:playben@sip.linphone.org"}],"last-action":1707920415404,"id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":"0acf16f0-142a-11ee-8871-3643c25e25c5","role-id":"84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91","groups":{"84c26990-21a7-11ea-8bf3-be4e7b8a0a91":true,"2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f":true},"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","session-started":"2024-02-14T14:20:15Z","direction":"inbound","session":{"headless":false,"closed":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","expire-at":"2024-02-14T14:26:55Z","reason-id":null,"resource-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":null,"reason-list-id":null,"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","direction":"inbound"}},"timeout-end":"2024-02-14T14:24:53Z"}},"xmsEvent":{"status":0,"body":{"web_service":{"$":{"version":"1.0"},"eventhandler_response":[{"$":{"identifier":"f73b5a1d-cca9-4389-a9a2-515c6608804a","appid":"app","status":"active","href":"/default/eventhandlers/f73b5a1d-cca9-4389-a9a2-515c6608804a"},"eventsubscribe":[{"$":{"type":"any","resource_id":"any","resource_type":"any"}}],"webhooks":[{"$":{"url":"https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook"}}]}]}}}}
[2024-02-14T14:23:55.032Z] info: sendActionResponse is called {"tenantId":"5632772e-b379-4d73-b84d-633e4c64097e","interactionId":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","actionId":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","subId":"2e6475e3-9725-43e4-bc7b-b12830ce175b","metadata":{},"update":{}}
[2024-02-14T14:23:55.033Z] info: sending action response  {"tenantId":"5632772e-b379-4d73-b84d-633e4c64097e","interactionId":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","actionId":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","subId":"2e6475e3-9725-43e4-bc7b-b12830ce175b","url":"https://us-east-1-qe-edge.cxengagelabs.net/v1/tenants/5632772e-b379-4d73-b84d-633e4c64097e/interactions/65ccccf0-67ad-4a18-ac60-db0cdc68971c/actions/aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","data":{"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","source":"xms","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","metadata":{},"update":{}}}
[2024-02-14T14:23:55.193Z] info: /dial: called: req.params {"tenantId":":tenant-id","interactionId":":interaction-id"}
[2024-02-14T14:23:55.193Z] info: action-id: "aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b"
[2024-02-14T14:23:55.193Z] info: /dial: called {"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","params":{"id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","action-name":"dial","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","integration":{"id":null},"metadata":{},"parameters":{"from":"+15064064885","to":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"muted":false,"record":false,"early-media":false,"timeout":"2024-02-14T14:24:54Z","resource":{"session-reason":null,"deleted":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","email":"bliao@serenova.com","active-extension":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"updated":"2024-02-14T14:20:15Z","created":"2019-12-18T15:03:15Z","user-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","state":"ready","last-ready":1707920415404,"extension":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","updated-by":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","created-by":"81fb5470-1b26-11e9-8442-70c414dc3a43","status":"accepted","extensions":[{"provider":"twilio","region":"default","sdk-version":"default","type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"},{"description":"Linephone playben","type":"sip","value":"sip:playben@sip.linphone.org"}],"last-action":1707920415404,"id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":"0acf16f0-142a-11ee-8871-3643c25e25c5","role-id":"84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91","groups":{"84c26990-21a7-11ea-8bf3-be4e7b8a0a91":true,"2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f":true},"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","session-started":"2024-02-14T14:20:15Z","direction":"inbound","session":{"headless":false,"closed":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","expire-at":"2024-02-14T14:26:55Z","reason-id":null,"resource-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":null,"reason-list-id":null,"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","direction":"inbound"}},"timeout-end":"2024-02-14T14:24:53Z"}}}
[2024-02-14T14:23:55.193Z] info: metadata is empty {"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","params":{"id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","action-name":"dial","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","integration":{"id":null},"metadata":{},"parameters":{"from":"+15064064885","to":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"muted":false,"record":false,"early-media":false,"timeout":"2024-02-14T14:24:54Z","resource":{"session-reason":null,"deleted":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","email":"bliao@serenova.com","active-extension":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"updated":"2024-02-14T14:20:15Z","created":"2019-12-18T15:03:15Z","user-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","state":"ready","last-ready":1707920415404,"extension":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","updated-by":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","created-by":"81fb5470-1b26-11e9-8442-70c414dc3a43","status":"accepted","extensions":[{"provider":"twilio","region":"default","sdk-version":"default","type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"},{"description":"Linephone playben","type":"sip","value":"sip:playben@sip.linphone.org"}],"last-action":1707920415404,"id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":"0acf16f0-142a-11ee-8871-3643c25e25c5","role-id":"84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91","groups":{"84c26990-21a7-11ea-8bf3-be4e7b8a0a91":true,"2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f":true},"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","session-started":"2024-02-14T14:20:15Z","direction":"inbound","session":{"headless":false,"closed":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","expire-at":"2024-02-14T14:26:55Z","reason-id":null,"resource-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":null,"reason-list-id":null,"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","direction":"inbound"}},"timeout-end":"2024-02-14T14:24:53Z"}}}
[2024-02-14T14:23:55.194Z] info: callBackUri "https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook"
[2024-02-14T14:23:55.195Z] debug: Create a webhook request, token: "QVBJVGVzdDpBcGlUZXN0MTIzIUAj"
[2024-02-14T14:23:55.195Z] debug: Create a webhook request, body: "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<web_service version=\"1.0\">\n  <eventhandler>\n    <eventsubscribe action=\"add\" resource_id=\"any\" resource_type=\"any\" type=\"any\"/>\n    <webhooks action=\"add\" url=\"https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook\"/>\n  </eventhandler>\n</web_service>"
[2024-02-14T14:23:55.195Z] debug: Create a webhook request, xmsurl: "http://107.20.26.214:81/default/eventhandlers?tag=remotecontrol_;appid=app"
[2024-02-14T14:23:55.268Z] debug: createWebHookRequest: result: "{\"web_service\":{\"$\":{\"version\":\"1.0\"},\"eventhandler_response\":[{\"$\":{\"identifier\":\"f499dd77-4e36-4a85-9dce-308a7e22d557\",\"appid\":\"app\",\"status\":\"active\",\"href\":\"/default/eventhandlers/f499dd77-4e36-4a85-9dce-308a7e22d557\"},\"eventsubscribe\":[{\"$\":{\"type\":\"any\",\"resource_id\":\"any\",\"resource_type\":\"any\"}}],\"webhooks\":[{\"$\":{\"url\":\"https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook\"}}]}]}}"
[2024-02-14T14:23:55.269Z] info: XMS event is created {"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","params":{"id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","action-name":"dial","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","integration":{"id":null},"metadata":{},"parameters":{"from":"+15064064885","to":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"muted":false,"record":false,"early-media":false,"timeout":"2024-02-14T14:24:54Z","resource":{"session-reason":null,"deleted":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","email":"bliao@serenova.com","active-extension":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"updated":"2024-02-14T14:20:15Z","created":"2019-12-18T15:03:15Z","user-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","state":"ready","last-ready":1707920415404,"extension":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","updated-by":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","created-by":"81fb5470-1b26-11e9-8442-70c414dc3a43","status":"accepted","extensions":[{"provider":"twilio","region":"default","sdk-version":"default","type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"},{"description":"Linephone playben","type":"sip","value":"sip:playben@sip.linphone.org"}],"last-action":1707920415404,"id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":"0acf16f0-142a-11ee-8871-3643c25e25c5","role-id":"84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91","groups":{"84c26990-21a7-11ea-8bf3-be4e7b8a0a91":true,"2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f":true},"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","session-started":"2024-02-14T14:20:15Z","direction":"inbound","session":{"headless":false,"closed":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","expire-at":"2024-02-14T14:26:55Z","reason-id":null,"resource-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":null,"reason-list-id":null,"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","direction":"inbound"}},"timeout-end":"2024-02-14T14:24:53Z"}},"xmsEvent":{"status":0,"body":{"web_service":{"$":{"version":"1.0"},"eventhandler_response":[{"$":{"identifier":"f499dd77-4e36-4a85-9dce-308a7e22d557","appid":"app","status":"active","href":"/default/eventhandlers/f499dd77-4e36-4a85-9dce-308a7e22d557"},"eventsubscribe":[{"$":{"type":"any","resource_id":"any","resource_type":"any"}}],"webhooks":[{"$":{"url":"https://e4f9-159-2-180-142.ngrok-free.app /webhook/tenant/5632772e-b379-4d73-b84d-633e4c64097e/webhook"}}]}]}}}}
[2024-02-14T14:23:55.275Z] info: sendActionResponse is called {"tenantId":"5632772e-b379-4d73-b84d-633e4c64097e","interactionId":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","actionId":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","subId":"2e6475e3-9725-43e4-bc7b-b12830ce175b","metadata":{},"update":{}}
[2024-02-14T14:23:55.275Z] info: sending action response  {"tenantId":"5632772e-b379-4d73-b84d-633e4c64097e","interactionId":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","actionId":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","subId":"2e6475e3-9725-43e4-bc7b-b12830ce175b","url":"https://us-east-1-qe-edge.cxengagelabs.net/v1/tenants/5632772e-b379-4d73-b84d-633e4c64097e/interactions/65ccccf0-67ad-4a18-ac60-db0cdc68971c/actions/aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","data":{"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","source":"xms","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","metadata":{},"update":{}}}
[2024-02-14T14:23:55.679Z] error: sendActionResponse: Request failed with status code 404 {"message":"Request failed with status code 404","name":"AxiosError","stack":"AxiosError: Request failed with status code 404\n    at settle (/Users/bliao/develop/projects/serenova/xms-gateway-poc/node_modules/axios/dist/node/axios.cjs:1970:12)\n    at IncomingMessage.handleStreamEnd (/Users/bliao/develop/projects/serenova/xms-gateway-poc/node_modules/axios/dist/node/axios.cjs:3069:11)\n    at IncomingMessage.emit (node:events:525:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http"],"transformRequest":[null],"transformResponse":[null],"timeout":0,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"Blob":null},"headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","Authorization":"Basic dGl0YW4tZ2F0ZXdheXNAbGl2ZW9wcy5jb206YkNzVzUzbW80NVdXc3VaNQ==","User-Agent":"axios/1.6.5","Content-Length":"248","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"https://us-east-1-qe-edge.cxengagelabs.net/v1/tenants/5632772e-b379-4d73-b84d-633e4c64097e/interactions/65ccccf0-67ad-4a18-ac60-db0cdc68971c/actions/aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","data":"{\"tenant-id\":\"5632772e-b379-4d73-b84d-633e4c64097e\",\"interaction-id\":\"65ccccf0-67ad-4a18-ac60-db0cdc68971c\",\"action-id\":\"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b\",\"source\":\"xms\",\"sub-id\":\"2e6475e3-9725-43e4-bc7b-b12830ce175b\",\"metadata\":{},\"update\":{}}"},"code":"ERR_BAD_REQUEST","status":404}
[2024-02-14T14:23:55.680Z] info: Responding to the dial action: {"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","action-id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","params":{"id":"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","action-name":"dial","sub-id":"2e6475e3-9725-43e4-bc7b-b12830ce175b","interaction-id":"65ccccf0-67ad-4a18-ac60-db0cdc68971c","tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","integration":{"id":null},"metadata":{},"parameters":{"from":"+15064064885","to":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"muted":false,"record":false,"early-media":false,"timeout":"2024-02-14T14:24:54Z","resource":{"session-reason":null,"deleted":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","email":"bliao@serenova.com","active-extension":{"type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","provider":"twilio","region":"default","sdk-version":"default"},"updated":"2024-02-14T14:20:15Z","created":"2019-12-18T15:03:15Z","user-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","state":"ready","last-ready":1707920415404,"extension":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91","updated-by":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","created-by":"81fb5470-1b26-11e9-8442-70c414dc3a43","status":"accepted","extensions":[{"provider":"twilio","region":"default","sdk-version":"default","type":"webrtc","value":"4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"},{"description":"Linephone playben","type":"sip","value":"sip:playben@sip.linphone.org"}],"last-action":1707920415404,"id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":"0acf16f0-142a-11ee-8871-3643c25e25c5","role-id":"84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91","groups":{"84c26990-21a7-11ea-8bf3-be4e7b8a0a91":true,"2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f":true},"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","session-started":"2024-02-14T14:20:15Z","direction":"inbound","session":{"headless":false,"closed":false,"session-id":"218f05e0-cb44-11ee-8203-2362e2069fdf","expire-at":"2024-02-14T14:26:55Z","reason-id":null,"resource-id":"4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91","capacity-rule-id":null,"reason-list-id":null,"tenant-id":"5632772e-b379-4d73-b84d-633e4c64097e","direction":"inbound"}},"timeout-end":"2024-02-14T14:24:53Z"}},"actionRep":{"status":1002,"body":{"message":"failed, http post request","error":{"message":"Request failed with status code 404","name":"AxiosError","stack":"AxiosError: Request failed with status code 404\n    at settle (/Users/bliao/develop/projects/serenova/xms-gateway-poc/node_modules/axios/dist/node/axios.cjs:1970:12)\n    at IncomingMessage.handleStreamEnd (/Users/bliao/develop/projects/serenova/xms-gateway-poc/node_modules/axios/dist/node/axios.cjs:3069:11)\n    at IncomingMessage.emit (node:events:525:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http"],"transformRequest":[null],"transformResponse":[null],"timeout":0,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"Blob":null},"headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","Authorization":"Basic dGl0YW4tZ2F0ZXdheXNAbGl2ZW9wcy5jb206YkNzVzUzbW80NVdXc3VaNQ==","User-Agent":"axios/1.6.5","Content-Length":"248","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"https://us-east-1-qe-edge.cxengagelabs.net/v1/tenants/5632772e-b379-4d73-b84d-633e4c64097e/interactions/65ccccf0-67ad-4a18-ac60-db0cdc68971c/actions/aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b","data":"{\"tenant-id\":\"5632772e-b379-4d73-b84d-633e4c64097e\",\"interaction-id\":\"65ccccf0-67ad-4a18-ac60-db0cdc68971c\",\"action-id\":\"aeedf8b1-cb44-11ee-a00a-744d2eb1cd4b\",\"source\":\"xms\",\"sub-id\":\"2e6475e3-9725-43e4-bc7b-b12830ce175b\",\"metadata\":{},\"update\":{}}"},"code":"ERR_BAD_REQUEST","status":404}}}}
node:internal/errors:478
    ErrorCaptureStackTrace(err);
    ^

Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at new NodeError (node:internal/errors:387:5)
    at ServerResponse.setHeader (node:_http_outgoing:644:11)
    at ServerResponse.header (/Users/bliao/develop/projects/serenova/xms-gateway-poc/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/bliao/develop/projects/serenova/xms-gateway-poc/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/bliao/develop/projects/serenova/xms-gateway-poc/node_modules/express/lib/response.js:278:15)
    at dial (/Users/bliao/develop/projects/serenova/xms-gateway-poc/src/handlers/actions.js:189:19)
    at processTicksAndRejections (node:internal/process/task_queues:96:5) {
  code: 'ERR_HTTP_HEADERS_SENT'
}




[2024-02-14T16: 18: 00.559Z
] info: XMS conference is created {
    "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
    "interaction-id": "65cce7ad-4269-4ffb-aed0-24dcd08768ad",
    "action-id": "9f0636a3-cb54-11ee-8f64-c31465416d2b",
    "params": {
        "id": "9f0636a3-cb54-11ee-8f64-c31465416d2b",
        "action-name": "dial",
        "sub-id": "c5e01b73-9cac-4496-805b-be6e5dd62340",
        "interaction-id": "65cce7ad-4269-4ffb-aed0-24dcd08768ad",
        "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
        "integration": {
            "id": null
        },
        "metadata": {},
        "parameters": {
            "record": false,
            "early-media": false,
            "to": {
                "type": "webrtc",
                "value": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91",
                "provider": "twilio",
                "region": "default",
                "sdk-version": "default"
            },
            "timeout": "2024-02-14T16:18:59Z",
            "muted": false,
            "resource": {
                "session-reason": null,
                "deleted": false,
                "session-id": "218f05e0-cb44-11ee-8203-2362e2069fdf",
                "email": "bliao@serenova.com",
                "active-extension": {
                    "type": "webrtc",
                    "value": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91",
                    "provider": "twilio",
                    "region": "default",
                    "sdk-version": "default"
                },
                "updated": "2024-02-14T16:17:48Z",
                "created": "2019-12-18T15:03:15Z",
                "user-id": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                "state": "ready",
                "last-ready": 1707927468465,
                "extension": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91",
                "updated-by": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                "created-by": "81fb5470-1b26-11e9-8442-70c414dc3a43",
                "status": "accepted",
                "extensions": [
                    {
                        "provider": "twilio",
                        "region": "default",
                        "sdk-version": "default",
                        "type": "webrtc",
                        "value": "4e4d1ff0_21a1_11ea_8bf3_be4e7b8a0a91"
                    },
                    {
                        "description": "Linephone playben",
                        "type": "sip",
                        "value": "sip:playben@sip.linphone.org"
                    }
                ],
                "last-action": 1707927468465,
                "id": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                "capacity-rule-id": "0acf16f0-142a-11ee-8871-3643c25e25c5",
                "role-id": "84bc4f10-21a7-11ea-8bf3-be4e7b8a0a91",
                "groups": {
                    "84c26990-21a7-11ea-8bf3-be4e7b8a0a91": true,
                    "2cacdfb0-a7f0-11ed-b4a6-29163ed7ad0f": true
                },
                "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
                "session-started": "2024-02-14T16:17:48Z",
                "direction": "inbound",
                "session": {
                    "headless": false,
                    "closed": false,
                    "session-id": "218f05e0-cb44-11ee-8203-2362e2069fdf",
                    "expire-at": "2024-02-14T16:21:00Z",
                    "reason-id": null,
                    "resource-id": "4e4d1ff0-21a1-11ea-8bf3-be4e7b8a0a91",
                    "capacity-rule-id": null,
                    "reason-list-id": null,
                    "tenant-id": "5632772e-b379-4d73-b84d-633e4c64097e",
                    "direction": "inbound"
                }
            },
            "from": "+15064064885",
            "timeout-end": "2024-02-14T16:18:59Z"
        }
    },
    "conference": {
        "web_service": {
            "$": {
                "version": "1.0"
            },
            "conference_response": [
                {
                    "$": {
                        "identifier": "71c82773-e306-41d3-8b73-e90a0e485c56",
                        "appid": "app",
                        "href": "/default/conferences/71c82773-e306-41d3-8b73-e90a0e485c56",
                        "type": "audio",
                        "max_parties": "4",
                        "reserve": "2",
                        "layout": "0",
                        "caption": "yes",
                        "caption_duration": "infinite",
                        "beep": "yes",
                        "clamp_dtmf": "no",
                        "auto_gain_control": "yes",
                        "echo_cancellation": "yes",
                        "layout_size": "vga",
                        "active_talker_region": "1",
                        "active_talker_interval": "0ms",
                        "mixing_mode": "mcu"
                    }
                }
            ]
        }
    }
}